/*! For license information please see ohlcv-indicators.min.js.LICENSE.txt */
var OHLCV_INDICATORS;(()=>{var t={978:function(t,i){!function(t){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,e)},e=function(){return(e=Object.assign||function(t){for(var i,e=arguments,s=1,n=arguments.length;s<n;s++)for(var o in i=e[s])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t}).apply(this,arguments)};function s(){for(var t=arguments,i=0,e=0,s=arguments.length;e<s;e++)i+=t[e].length;var n=Array(i),o=0;for(e=0;e<s;e++)for(var r=arguments[e],h=0,l=r.length;h<l;h++,o++)n[o]=r[h];return n}var n=function(){function t(t,i,e,s,n,o){void 0===o&&(o=null),this.forked=!1,this.forkedAt=0,this.lastForkY=null,this.step=s,this.index=n,this.length=0,this.startPoint=o?{y:t?o.h:o.l,x:o.x}:{y:t||i,x:e},this.init(t,i,e),this.thisPoint=this.startPoint}return t.prototype.init=function(t,i,e){this.type||(this.type=t?"h":"l"),this.candlePoint={y:"h"==this.type?t:i,x:e},this.thisPoint&&(this.prevPoint=this.thisPoint,this.nextPoint&&(this.thisPoint=this.nextPoint),this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step})},t.prototype.update=function(t,i,e){var s=null;if(this.length++,this.init(t,i,e),this.k&&!isNaN(this.k)||(this.k=(this.candlePoint.y-this.startPoint.y)/(this.candlePoint.x-this.startPoint.x),this.b=this.candlePoint.y-this.k*this.candlePoint.x,this.prevPoint=this.startPoint,this.thisPoint=this.candlePoint,this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step},s={condition:"h"==this.type?"lt":"gt",value:this.nextPoint.y,action:"fork",lineIndex:this.index}),"h"==this.type&&this.thisPoint.y<=this.candlePoint.y||"l"==this.type&&this.thisPoint.y>=this.candlePoint.y){this.k=(this.candlePoint.y-this.startPoint.y)/(this.candlePoint.x-this.startPoint.x),this.b=this.candlePoint.y-this.k*this.candlePoint.x,this.thisPoint=this.candlePoint,this.length=0,this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step};var n=this.rollback?this.rollback.length:0,o=this.candlePoint.y-this.prevPoint.y;("h"==this.type?o>0:o<0)?(this.rollback={k:o,b:this.candlePoint.y-o*this.candlePoint.x,length:n+1,lastForkTime:this.forkedAt||(this.rollback?this.rollback.lastForkTime:0),lastForkValue:this.forkedValue||(this.rollback?this.rollback.lastForkValue:0)},this.forked=!1,this.forkedAt=null,this.forkedValue=null):(this.forkedAt=this.candlePoint.x,this.forkedValue=this.candlePoint.y,this.forked=!0,this.rollback=null),s={condition:"h"==this.type?"lt":"gt",value:this.nextPoint.y,action:"fork",lineIndex:this.index}}else this.rollback=null;return s},t.prototype.updateStep=function(t){this.step=t},t}(),o=function(){function t(t){this.lineIndex=0,this.forkDiffH=null,this.forkDiffL=null,this.step=t,this.list=[[],[]],this.id={}}return t.prototype.add=function(t,i,e,s,o){void 0===s&&(s=null),void 0===o&&(o=null);var r,h,l,a=null;if(null==o?(r=this.lineIndex,this.lineIndex++,null!=t?this.list[0].push(r):this.list[1].push(r)):(r=o,a=this.id[r].lastForkY||(null!=t?s.h:s.l)),this.id[r]=new n(t,i,e,this.step,r,s),a&&(this.id[r].lastForkY=a),r>1||null!=o&&null!=this.id[o]){h=null!=o?o:this.list["h"==this.id[r].type?0:1][this.list["h"==this.id[r].type?0:1].indexOf(r)-1],l=null!=o?o:this.list["h"==this.id[r].type?0:1][this.list["h"==this.id[r].type?0:1].indexOf(r)-2];var u=this.id[h].lastForkY;l&&!u&&(u=this.id[l].lastForkY);var c=null!=t?s.h:s.l;u&&(t?this.forkDiffH=u>=c?-h-1:h+1:this.forkDiffL=u>=c?-h-1:h+1),this.id[h].lastForkY=c}return r},t.prototype.update=function(t,i,e,s){return this.id[t].update(i,e,s)},t.prototype.delete=function(t){this.id[t]&&("h"==this.id[t].type?this.list[0].splice(this.list[0].indexOf(t),1):this.list[1].splice(this.list[1].indexOf(t),1),delete this.id[t])},t}(),r=function(){function t(t,i){this.kdiff=[],this.env=i,this.lines=t,this.in={state:null,lineIndex:null,line:null},this.is={state:null,lineIndex:null,line:null,start:null,size:0},this.was={state:null,lineIndex:null,line:null,size:null},this.width=0,this.speed=0,this.at=0}return t.prototype.update=function(t,i){var s=this;if(t.length>1?this.hlMaxDuration=t.map((function(t){return s.lines.id[t]})).filter((function(t){return!s.is.line||(t.forkedAt?t.forkedAt>s.is.line.startPoint.x:!!t.rollback&&t.rollback.lastForkTime>s.is.line.startPoint.x)})).reduce((function(t,i){return t.length>i.length?t:i}),this.lines.id[t[0]]):this.hlMaxDuration=this.lines.id[t[0]],i.length>1?this.llMaxDuration=i.map((function(t){return s.lines.id[t]})).filter((function(t){return!s.is.line||(t.forkedAt?t.forkedAt>s.is.line.startPoint.x:!!t.rollback&&t.rollback.lastForkTime>s.is.line.startPoint.x)})).reduce((function(t,i){return t.length>i.length?t:i}),this.lines.id[i[0]]):this.llMaxDuration=this.lines.id[i[0]],null==this.is.state&&null==this.was.state&&(this.is.line=this.llMaxDuration&&this.llMaxDuration.length>this.env.minLength&&this.hlMaxDuration.length<this.env.minLength?this.llMaxDuration:this.hlMaxDuration&&this.hlMaxDuration.length>this.env.minLength&&this.llMaxDuration.length<this.env.minLength?this.hlMaxDuration:null,this.is.line&&(this.is.lineIndex=this.is.line.index,this.is.state="h"==this.is.line.type?"fall":"rise",this.is.start=this.is.line.candlePoint)),this.is.state){this.is.size=Math.max(this.is.size,Math.abs(this.is.start.y-this.is.line.candlePoint.y));var n,o=this.lines.id[this.is.lineIndex]||this.lines.id["h"==this.is.line.type?0:1],r=null,h=null,l=this.lines.list["h"==o.type?1:0].filter((function(t){return s.lines.id[t].forked&&s.lines.id[t].thisPoint.x-s.lines.id[t].forkedAt>12}));l.length>1?l[1]:l.length>0&&l[0];var a=l.filter((function(t){return s.lines.id[t].forkedAt>s.is.start.x}));if(o&&this.lines.list["h"==o.type?0:1].forEach((function(t,i){var e=s.lines.id[t];if(t>=o.index&&null!=e.rollback){n=s.lines.list["h"==o.type?0:1][i-1];var l=1==s.env.deltaModel&&i>1&&n&&s.lines.id[n]?i>1&&n&&s.lines.id[n].lastForkY:s.lines.id[t>0?t-1:0];h=l?s.lines.id[t>1?n:"h"==o.type?0:1].lastForkY-e.candlePoint.y:e.rollback?e.rollback.lastForkValue-e.candlePoint.y:0,e.rollback.lastForkValue>0&&e.thisPoint.x-e.rollback.lastForkTime>s.env.minRightLeg&&("fall"==s.is.state?s.llMaxDuration.length>1:s.hlMaxDuration.length>1)&&(("h"==o.type?h<0:h>0)||e.rollback.length>s.env.rollbackLength||2*s.is.size/3>Math.abs(s.is.start.y-s.is.line.candlePoint.y)&&s.is.size>s.is.line.candlePoint.y*s.env.minIsSizeOnRollback&&a.length>1||("h"==o.type?e.candlePoint.y>s.is.start.y&&1==s.lines.list[0].length:e.candlePoint.y<s.is.start.y&&1==s.lines.list[1].length))&&(e.candlePoint.x-e.rollback.lastForkTime>s.env.forkDurationMin&&e.candlePoint.x-e.rollback.lastForkTime<s.env.forkDurationMax||("h"==o.type?e.candlePoint.y>e.startPoint.y:e.candlePoint.y<e.startPoint.y)||("h"==o.type?e.candlePoint.y>s.is.start.y&&1==s.lines.list[0].length:e.candlePoint.y<s.is.start.y&&1==s.lines.list[1].length))&&(r=t+1)}})),r){this.in.size=(this.was.size||0)+this.is.size;var u=this.lines.id[0].candlePoint.y-this.is.start.y,c="rise"==this.is.state?u>=0:u<0;this.was.size&&(this.in.state=this.was.size>this.is.size?this.was.state:this.is.state),this.was=e({},this.is),this.was.success=c,this.is.line="fall"==this.is.state?this.llMaxDuration:this.hlMaxDuration,this.is.state="h"==this.is.line.type?"fall":"rise",this.is.lineIndex=this.is.line.index,this.is.start=this.lines.id[0].candlePoint,this.is.size=0}}},t}(),h=function(){function t(t){this.hLineDirectives=[],this.lLineDirectives=[],this.step=1,this.i=0,this.localCounter=0,this.prevPoint=null,this.env=Object.assign({step:1,minLength:5,minRightLeg:3,maxForks:500,minLog:0,maxLog:0,rollbackLength:3,deltaModel:1,minIsSizeOnRollback:.05},t),this.env.minLength=Math.round(this.env.minLength/this.env.step)||1,this.env.minRightLeg=Math.round(this.env.minRightLeg/this.env.step)||1,this.env.rollbackLength=Math.round(this.env.rollbackLength/this.env.step)||1,this.env.forkDurationMin=Math.round(this.env.forkDurationMin/this.env.step)||1,this.env.forkDurationMax=Math.round(this.env.forkDurationMax/this.env.step)||1,this.lines=new o(this.step),this.trend=new r(this.lines,this.env)}return t.prototype.log=function(t){for(var i=arguments,e=[],n=1;n<arguments.length;n++)e[n-1]=i[n];this.consoleWindow=this.env.minLog<this.localCounter&&this.localCounter<this.env.maxLog,this.consoleWindow&&console.log.apply(console,s([t],e))},t.prototype.nextValue=function(t,i,e,s){var n,o=this;this.localCounter++,this.lLineDirectives.length>0&&this.lLineDirectives.forEach((function(t,i){var e=o.lines.id[t.lineIndex];"gt"==t.condition&&s>t.value&&"fork"==t.action&&e&&(null!=t.lineIndex&&null!=e&&e.k<0?o.lines.add(null,s,o.i-1,o.prevPoint,t.lineIndex):(e.forked=!0,e.forkedAt=e.thisPoint.x,e.forkedValue=e.thisPoint.y,o.lines.add(null,s,o.i-1,o.prevPoint)))})),this.hLineDirectives.length>0&&this.hLineDirectives.forEach((function(t,i){var s=o.lines.id[t.lineIndex];"lt"==t.condition&&e<t.value&&"fork"==t.action&&s&&(s.k>0?o.lines.add(e,null,o.i-1,o.prevPoint,t.lineIndex):(s.forked=!0,s.forkedAt=s.thisPoint.x,s.forkedValue=s.thisPoint.y,o.lines.add(e,null,o.i-1,o.prevPoint)))})),this.hLineDirectives.length=0,this.lLineDirectives.length=0,this.lines.list[0].length<1?(this.lines.add(e,null,this.i),this.lines.add(null,s,this.i)):this.lines.list.forEach((function(t){return t.forEach((function(t){var i=o.lines.id[t];if(i&&i.type){n=null,i&&i.startPoint.x<o.i&&(n=o.lines.update(t,e,s,o.i));var r=i.type;n&&("h"==r?o.hLineDirectives.push(n):o.lLineDirectives.push(n))}}))}));var r=[];return this.lines.list.forEach((function(t){t&&(r=[],t.forEach((function(i,e){var s=o.lines.id[t[e]],n=o.lines.id[t[e-1]];(e>0&&s&&n&&"h"==s.type&&s.thisPoint&&n.thisPoint.y<=s.thisPoint.y||e>o.env.maxForks||e>0&&s&&n&&"l"==s.type&&s.thisPoint&&n.thisPoint.y>=s.thisPoint.y||e>o.env.maxForks)&&r.push(i)})),r.forEach((function(t){return o.lines.delete(t)})))})),this.prevPoint={x:this.i,h:e,l:s},this.trend.update(this.lines.list[0],this.lines.list[1]),this.i++,this.lines},t}(),l=Object.freeze({__proto__:null,Indicator:h}),a=function(){function t(t){this.length=t,this.filled=!1,this.pointer=0,this.buffer=new Array(t),this.maxIndex=t-1}return t.prototype.push=function(t){var i=this.buffer[this.pointer];return this.buffer[this.pointer]=t,this.iteratorNext(),i},t.prototype.pushback=function(t){this.iteratorPrev();var i=this.buffer[this.pointer];return this.buffer[this.pointer]=t,i},t.prototype.peek=function(){return this.buffer[this.pointer]},t.prototype.forEach=function(t){for(var i=this.pointer,e=0;e!==this.length;)t(this.buffer[i],e),i=(this.length+i+1)%this.length,e++},t.prototype.forEachRight=function(t){for(var i=(this.length+this.pointer-1)%this.length,e=this.length-1;e!==this.length;)t(this.buffer[i],e),i=(this.length+i-1)%this.length,e--},t.prototype.fill=function(t){this.buffer.fill(t),this.filled=!0},t.prototype.toArray=function(){return this.buffer},t.prototype.iteratorNext=function(){this.pointer++,this.pointer>this.maxIndex&&(this.pointer=0,this.filled=!0)},t.prototype.iteratorPrev=function(){this.pointer--,this.pointer<0&&(this.pointer=this.maxIndex)},t}(),u=function(t){function e(i,e){void 0===i&&(i=100);var s=t.call(this,i)||this;return s.period=i,s.mode=e,s.comparator="max"===e?s.maxComporator:s.mminComporator,s}return function(t,e){function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}(e,t),e.prototype.nextValue=function(t){return this.push(t),this.getExtremum()},e.prototype.momentValue=function(t){var i=this.push(t),e=this.getExtremum();return this.pushback(i),e},e.prototype.maxComporator=function(t,i){return t>i},e.prototype.mminComporator=function(t,i){return t<i},e.prototype.getExtremum=function(t){var i=(this.length+this.pointer-2)%this.length,e="max"===this.mode?-1/0:1/0;if(!this.filled)return 0;for(;i!==this.pointer;){var s=this.buffer[(this.length+i-1)%this.length],n=this.buffer[(this.length+i+1)%this.length],o=this.buffer[i];if(this.comparator(o,e)&&this.comparator(o,s)&&this.comparator(o,n)){if(e=o,this.prevIx===i)return null;if(this.prevIx=i,t)return e}i=(this.length+i-1)%this.length}return isFinite(e)?e:(this.prevIx=null,null)},e}(a),c=function(){function t(t){this.period=t,this.sum=0,this.circular=new a(t)}return t.prototype.nextValue=function(t){var i=this;if(this.circular.push(t),this.sum+=t,this.circular.filled)return this.nextValue=function(t){return i.sum=i.sum-i.circular.push(t)+t,i.sum/i.period},this.momentValue=function(t){return(i.sum-i.circular.peek()+t)/i.period},this.sum/this.period},t.prototype.momentValue=function(t){},t}(),p=function(){function t(t){this.period=t,this.smooth=1/this.period,this.sma=new c(this.period)}return t.prototype.nextValue=function(t){return this.wema?this.wema=(t-this.wema)*this.smooth+this.wema:this.wema=this.sma.nextValue(t)},t.prototype.momentValue=function(t){return this.wema?(t-this.wema)*this.smooth+this.wema:this.sma.momentValue(t)},t}(),d=function(){function t(t){this.period=t,this.smooth=2/(this.period+1),this.sma=new c(this.period)}return t.prototype.nextValue=function(t){var i=this,e=this.sma.nextValue(t);return e&&(this.ema=e,this.nextValue=function(t){return i.ema=(t-i.ema)*i.smooth+i.ema},this.momentValue=function(t){return(t-i.ema)*i.smooth+i.ema}),e},t.prototype.momentValue=function(t){},t}(),f=function(){function t(t,i){this.indicator=t,this.samples=i,this._indicators=[]}return t.prototype.create=function(){for(var t,i=arguments,e=[],n=0;n<arguments.length;n++)e[n]=i[n];for(var o=0;o<this.samples;o++)this._indicators.push(new((t=this.indicator).bind.apply(t,s([void 0],e))))},t.prototype.nextValue=function(t){for(var i=0;i<this.samples;i++)if(void 0===(t=this._indicators[i].nextValue(t)))return t;return t},t.prototype.momentValue=function(t){for(var i=0;i<this.samples;i++)if(null==(t=this._indicators[i].momentValue(t)))return t;return t},t}(),m=function(){function t(t,i,e,s,n){void 0===t&&(t=.85),void 0===s&&(s=1),void 0===n&&(n=1),this.redunant=t,this.multiplier=s,this.offset=n,this.prevValue=0,this.lastUpperValue=0,this.lastLowerValue=0,this.samplerUp=new f(i,e),this.samplerLow=new f(i,e)}return t.prototype.create=function(){for(var t,i,e=arguments,s=[],n=0;n<arguments.length;n++)s[n]=e[n];(t=this.samplerUp).create.apply(t,s),(i=this.samplerLow).create.apply(i,s)},t.prototype.nextValue=function(t){this.lastUpperValue=t>0?Math.max(t,this.prevValue):Math.max(0,this.lastUpperValue)*this.redunant,this.lastLowerValue=t<=0?Math.min(t,this.prevValue):Math.min(0,this.lastLowerValue)*this.redunant;var i=(t<=0?t:this.lastLowerValue)*this.multiplier,e=(t>=0?t:this.lastUpperValue)*this.multiplier;return[this.samplerUp.nextValue(e)+this.offset,this.samplerLow.nextValue(i)-this.offset]},t}(),v=function(){function t(t,i,e,s){void 0===e&&(e=.85),void 0===s&&(s="WEMA"),this.period=t,this.samples=i,this.redunant=e,this.type=s,this.upper=0,this.lower=0,this.lastUpperValue=0,this.lastLowerValue=0,this.sample1Up=this.createSample(),this.sample2Up=this.createSample(),this.sample3Up=this.createSample(),this.sample1Low=this.createSample(),this.sample2Low=this.createSample(),this.sample3Low=this.createSample()}return t.prototype.nextValue=function(t){return t>0?(this.upper=this.getUp(t),this.lastLowerValue*=this.redunant,this.lower=this.getDown(this.lastLowerValue),this.lastUpperValue=t):t<0&&(this.lower=this.getDown(t),this.lastUpperValue*=this.redunant,this.upper=this.getUp(this.lastUpperValue),this.lastLowerValue=t),{upper:this.upper,lower:this.lower}},t.prototype.getUp=function(t){var i=this.sample1Up.nextValue(t),e=null;return 1===this.samples?i:(i&&(e=this.sample2Up.nextValue(i)),2===this.samples?e:e?this.sample3Up.nextValue(e):null)},t.prototype.getDown=function(t){var i=this.sample1Low.nextValue(t),e=null;return 1===this.samples?i:(i&&(e=this.sample2Low.nextValue(i)),2===this.samples?e:e?this.sample3Low.nextValue(e):null)},t.prototype.createSample=function(){switch(this.type){case"EMA":return new d(this.period);case"WEMA":return new p(this.period);case"SMA":return new c(this.period)}},t}(),g=function(){function t(t){this.period=t,this.SMAx=new c(this.period),this.SMAy=new c(this.period),this.pricesX=new a(this.period),this.pricesY=new a(this.period)}return t.prototype.nextValue=function(t,i){this.pricesX.push(t),this.pricesY.push(i),this.SMAxValue=this.SMAx.nextValue(t),this.SMAyValue=this.SMAy.nextValue(i);for(var e=0,s=0,n=0,o=0;o<this.period;o++){var r=this.pricesX.toArray()[o],h=this.pricesY.toArray()[o];e+=(r-this.SMAxValue)*(h-this.SMAyValue),s+=Math.pow(r-this.SMAxValue,2),n+=Math.pow(h-this.SMAyValue,2)}return e/Math.sqrt(s*n)},t}(),w=function(){function t(t){this.period=t,this.denominator=t*(t+1)/2,this.buffer=new a(t),this.values=[]}return t.prototype.nextValue=function(t){var i=this;if(this.buffer.push(t),this.buffer.filled){var e=0;return this.buffer.forEach((function(t,s){e+=t*(s+1)/i.denominator})),e}},t.prototype.momentValue=function(t){var i=this,e=this.buffer.push(t);if(this.buffer.filled){var s=0;return this.buffer.forEach((function(t,e){s+=t*(e+1)/i.denominator})),this.buffer.pushback(e),s}this.buffer.pushback(e)},t}(),x=function(){function t(t){void 0===t&&(t=.2),this.alpha=t,this.filled=!1}return t.prototype.nextValue=function(t){var i=this.alpha*t+(1-this.alpha)*(this.prevValue||1);if(this.filled=this.filled||void 0!==this.prevValue,this.prevValue=i,this.filled)return i},t.prototype.momentValue=function(t){if(this.filled)return this.alpha*t+(1-this.alpha)*(this.prevValue||1)},t}(),V=function(){function t(t){this.period=t,this.sum=0,this.avg=0,this.filled=!1,this.fill=0}return t.prototype.nextValue=function(t){var i=this;return this.filled?(this.nextValue=function(t){return i.avg=(i.avg*(i.period-1)+t)/i.period},this.nextValue(t)):(this.sum+=t,this.fill++,this.fill===this.period?(this.filled=!0,this.avg=this.sum/this.period,this.avg):void 0)},t.prototype.momentValue=function(t){if(this.filled)return(this.avg*(this.period-1)+t)/this.period},t}(),y=function(){function t(t){void 0===t&&(t=14),this.period=t,this.alpha=1/t,this.sma=new c(this.period)}return t.prototype.nextValue=function(t){var i=this;return this.prevValue?(this.prevValue=this.alpha*t+(1-this.alpha)*this.prevValue,this.nextValue=function(t){return i.prevValue=i.alpha*t+(1-i.alpha)*i.prevValue,i.prevValue}):this.prevValue=this.sma.nextValue(t),this.prevValue},t.prototype.momentValue=function(t){if(this.prevValue)return this.alpha*t+(1-this.alpha)*this.prevValue},t}(),M=function(){function t(t,i){void 0===t&&(t=5),void 0===i&&(i=34),this.smaSlow=new c(i),this.smaFast=new c(t)}return t.prototype.nextValue=function(t,i){var e=this;if(this.smaSlowValue=this.smaSlow.nextValue((t+i)/2),this.smaFastValue=this.smaFast.nextValue((t+i)/2),void 0!==this.smaSlowValue&&void 0!==this.smaFastValue)return this.nextValue=function(t,i){return e.smaSlowValue=e.smaSlow.nextValue((t+i)/2),e.smaFastValue=e.smaFast.nextValue((t+i)/2),e.smaFastValue-e.smaSlowValue},this.momentValue=function(t,i){return e.smaFast.momentValue((t+i)/2)-e.smaSlow.momentValue((t+i)/2)},this.smaFastValue-this.smaSlowValue},t.prototype.momentValue=function(t,i){},t}(),P=function(){function t(){this.sma=new c(5),this.ao=new M}return t.prototype.nextValue=function(t,i){var e=this;if(this.aoValue=this.ao.nextValue(t,i),void 0!==this.aoValue&&(this.smaValue=this.sma.nextValue(this.aoValue),void 0!==this.smaValue))return this.nextValue=function(t,i){return e.aoValue=e.ao.nextValue(t,i),e.smaValue=e.sma.nextValue(e.aoValue),e.aoValue-e.smaValue},this.momentValue=function(t,i){return e.ao.momentValue(t,i)-e.sma.momentValue(e.aoValue)},this.aoValue-this.smaValue},t.prototype.momentValue=function(t,i){},t}(),k=function(t,i){return(t-i)/i*100},b=function(){function t(t){this.period=t,this.value=0,this.changes=new a(t)}return t.prototype.nextValue=function(t){if(this.prevPrice){var i=k(t,this.prevPrice);return this.calculate(i),this.prevPrice=t,this.value}this.prevPrice=t},t.prototype.calculate=function(t){return this.value+=t,this.value-=this.changes.push(t),this.value},t}();function A(t){return t.consolidate=0,t.power=0,t.streak=0,t.diff=0,t.startPrice=0,t.prevPeak=0,t}var S=function(){function t(){this.up={consolidate:0,power:0,streak:0,startPrice:0,diff:0,prevPeak:0},this.down={consolidate:0,power:0,streak:0,startPrice:0,diff:0,prevPeak:0}}return t.prototype.nextValue=function(t,i,s,n){if(t<i||this.up.streak&&this.up.prevPeak<n){this.up.startPrice||(this.up.startPrice=t),this.down.streak&&A(this.down);var o=i-t;this.up.streak++,this.up.prevPeak=n,this.up.diff>o?this.up.consolidate++:this.up.consolidate=0,this.up.diff=o,this.up.power=k(i,this.up.startPrice)}return(t>i||this.down.streak&&this.down.prevPeak>s)&&(this.down.startPrice||(this.down.startPrice=t),this.up.streak&&A(this.up),o=t-i,this.down.streak++,this.down.prevPeak=s,this.down.diff>o?this.down.consolidate++:this.down.consolidate=0,this.down.diff=o,this.down.power=k(i,this.down.startPrice)),t===i&&(this.up.streak++,this.down.streak++,this.up.diff=this.down.diff=0),this.up.streak>this.down.streak?e({},this.up):e({},this.down)},t}(),L=function(){function t(t){this.max=-1/0,this.highest=new a(t)}return t.prototype.filled=function(){return this.highest.filled},t.prototype.nextValue=function(t){return this.max<t&&(this.max=t),this.highest.push(t)===this.max&&t!==this.max&&(this.max=function(t){for(var i=-1/0,e=t.length-1;e>=0;e--){var s=t[e];i<s&&(i=s)}return i}(this.highest.toArray())),this.max},t.prototype.momentValue=function(t){return this.max>t?this.max:t},t}(),D=function(){function t(t){this.min=1/0,this.lowest=new a(t)}return t.prototype.filled=function(){return this.lowest.filled},t.prototype.nextValue=function(t){return this.min>t&&(this.min=t),this.lowest.push(t)===this.min&&t!==this.min&&(this.min=function(t){for(var i=1/0,e=t.length-1;e>=0;e--){var s=t[e];i>s&&(i=s)}return i}(this.lowest.toArray())),this.min},t.prototype.momentValue=function(t){return this.min<t?this.min:t},t}(),C=function(){function t(t,i){void 0===t&&(t=14),void 0===i&&(i=3),this.period=t,this.smaPeriod=i,this.sma=new c(this.smaPeriod),this.max=new L(t),this.min=new D(t)}return t.prototype.nextValue=function(t,i,e){var s=this.max.nextValue(t),n=this.min.nextValue(i);if(this.max.filled()){var o=(e-n)/(s-n)*100;return{k:o,d:this.sma.nextValue(o)}}},t.prototype.momentValue=function(t,i,e){if(this.max.filled()){var s=this.max.momentValue(t),n=this.min.momentValue(i),o=(e-n)/(s-n)*100;return{k:o,d:this.sma.momentValue(o)}}},t}(),F=function(){function t(t){this.avgGain=new V(t),this.avgLoss=new V(t)}return t.prototype.nextValue=function(t){var i=t-this.prev;if(this.prev){var e=i>0?i:0,s=i<0?i:0,n=this.avgGain.nextValue(e),o=this.avgLoss.nextValue(s);return this.prev=t,{upAvg:n,downAvg:o}}this.prev=t},t.prototype.momentValue=function(t){var i=t-this.prev,e=i>0?i:0,s=i<0?i:0;return{upAvg:this.avgGain.momentValue(e),downAvg:this.avgLoss.momentValue(s)}},t}(),B=function(){function t(t){void 0===t&&(t=14),this.period=t,this.change=new F(this.period)}return t.prototype.nextValue=function(t){var i=this.change.nextValue(t)||{},e=i.downAvg,s=i.upAvg;if(void 0!==s&&void 0!==e)return 100-100/(1+s/-e)},t.prototype.momentValue=function(t){var i=this.change.momentValue(t)||{},e=i.downAvg,s=i.upAvg;if(void 0!==s&&void 0!==e)return 100-100/(1+s/-e)},t}(),_=function(){function t(t,i,e,s){void 0===t&&(t=14),void 0===i&&(i=3),void 0===e&&(e=3),void 0===s&&(s=14),this.rsi=new B(t),this.sma1=new c(i),this.sma2=new c(e),this.max=new L(s),this.min=new D(s)}return t.prototype.nextValue=function(t){var i=this.rsi.nextValue(t);if(void 0!==i){var e=this.max.nextValue(i),s=this.min.nextValue(i);if(this.max.filled()){var n=(i-s)/(e-s)*100,o=this.sma1.nextValue(n);if(void 0!==o)return{k:o,d:this.sma2.nextValue(o),stochRsi:n}}}},t.prototype.momentValue=function(t){if(this.max.filled()){var i=this.rsi.momentValue(t),e=this.max.momentValue(i),s=this.min.momentValue(i),n=(i-s)/(e-s)*100,o=this.sma1.momentValue(n);return{k:o,d:this.sma2.momentValue(o),stochRsi:n}}},t}(),I=function(){function t(t){this.period=t,this.values=new a(t)}return t.prototype.nextValue=function(t,i){if(i)return this.nextValue=this.pureNextValue,this.momentValue=this.pureMomentValue,this.pureNextValue(t,i);this.values.push(t)},t.prototype.momentValue=function(t,i){},t.prototype.pureNextValue=function(t,i){var e=this;return this.values.push(t),this.values.toArray().reduce((function(t,s){return t+e.positiveDelta(i,s)}),0)/this.period},t.prototype.pureMomentValue=function(t,i){var e=this,s=this.values.push(t),n=this.values.toArray().reduce((function(t,s){return t+e.positiveDelta(i,s)}),0);return this.values.pushback(s),n/this.period},t.prototype.positiveDelta=function(t,i){return t>i?t-i:i-t},t}(),T=function(){function t(t){void 0===t&&(t=20),this.md=new I(t),this.sma=new c(t)}return t.prototype.nextValue=function(t,i,e){var s=(t+i+e)/3,n=this.sma.nextValue(s),o=this.md.nextValue(s,n);return o&&(s-n)/(.015*o)},t.prototype.momentValue=function(t,i,e){var s=(t+i+e)/3,n=this.sma.momentValue(s),o=this.md.momentValue(s,n);return o&&(s-n)/(.015*o)},t}(),E=function(){function t(t){this.period=t,this.arr=[],this.filled=!1,this.devider=0,this.lastSum=0,this.devider=function(t){for(var i=0,e=t.length;e>0;)i+=t[--e];return i}(Array.from(Array(this.period).keys()).map((function(t){return t+1})))}return t.prototype.nextValue=function(t){if(this.filled=this.filled||this.arr.length===this.period,this.arr.push(t),this.filled)return this.arr.shift(),this.arr.reduce((function(t,i,e){return t+i*(e+1)}),0)/this.devider},t.prototype.momentValue=function(t){if(this.filled){var i=this.arr.slice(1);return i.push(t),i.reduce((function(t,i,e){return t+i*(e+1)}),0)/this.devider}},t}();function O(t,i,e){if(e){var s=t-i,n=t>e?t-e:e-t,o=i>e?i-e:e-i;return s>=n&&s>=o?s:n>=s&&n>=o?n:o}}var R=function(){function t(t,i){switch(void 0===t&&(t=14),void 0===i&&(i="WEMA"),i){case"SMA":this.avg=new c(t);break;case"EMA":this.avg=new d(t);break;case"SMMA":this.avg=new V(t);break;case"WEMA":this.avg=new p(t);break;case"LWMA":this.avg=new E(t);break;case"EWMA":this.avg=new x(.2);break;case"RMA":this.avg=new y(t)}this.prevClose=0}return t.prototype.nextValue=function(t,i,e){var s=O(t,i,this.prevClose);if(this.prevClose=e,void 0!==s)return this.avg.nextValue(s)},t.prototype.momentValue=function(t,i){var e=O(t,i,this.prevClose);if(void 0!==e)return this.avg.momentValue(e)},t}(),U=function(){function t(t){void 0===t&&(t=5),this.values=new a(t)}return t.prototype.nextValue=function(t){var i=this.values.push(t);if(i)return(t-i)/i*100},t.prototype.momentValue=function(t){var i=this.values.peek();if(i)return(t-i)/i*100},t}(),N=function(){function t(t){void 0===t&&(t=20),this.maxProvider=new L(t),this.minProvider=new D(t)}return t.prototype.nextValue=function(t,i){var e=this.maxProvider.nextValue(t),s=this.minProvider.nextValue(i);return{upper:e,middle:(e+s)/2,lower:s}},t.prototype.momentValue=function(t,i){var e=this.maxProvider.momentValue(t),s=this.minProvider.momentValue(i);return{upper:e,middle:(e+s)/2,lower:s}},t}(),W=function(){function t(t){this.period=t,this.fill=0,this.values=new a(t)}return t.prototype.nextValue=function(t){var i=this;if(this.values.push(t),this.fill++,this.fill===this.period)return this.nextValue=function(t){var e=i.calc(t);return i.values.push(t),e},this.momentValue=this.calc,this.calc(t)},t.prototype.momentValue=function(t){},t.prototype.calc=function(t){var i=0;return this.values.toArray().forEach((function(e){e<=t&&i++})),i/this.period*100},t}(),H=function(){function t(t,i,e){void 0===t&&(t=3),void 0===i&&(i=2),void 0===e&&(e=100),this.period=t,this.rsi=new B(this.period),this.updownRsi=new B(i),this.roc=new U(1),this.percentRank=new W(e),this.updownPeriod=0,this.prevClose=0}return t.prototype.nextValue=function(t){var i=this.rsi.nextValue(t),e=this.percentRank.nextValue(this.roc.nextValue(t));if(this.updownPeriod=this.getUpdownPeriod(t),this.prevClose=t,this.updownValue=this.updownRsi.nextValue(this.updownPeriod),this.updownValue)return(i+this.updownValue+e)/3},t.prototype.momentValue=function(t){var i=this.rsi.momentValue(t),e=this.percentRank.momentValue(this.roc.momentValue(t)),s=this.getUpdownPeriod(t),n=this.updownRsi.momentValue(s);if(void 0!==n)return(i+n+e)/3},t.prototype.getUpdownPeriod=function(t){var i=this.updownPeriod;return t>this.prevClose?(this.updownPeriod<0&&(i=0),i++):t<this.prevClose?(this.updownPeriod>0&&(i=0),i--):i=0,i},t}(),j=function(){function t(t){this.period=t,this.values=new a(t)}return t.prototype.nextValue=function(t,i){return this.values.push(t),Math.sqrt(this.values.toArray().reduce((function(t,e){return t+Math.pow(e-i,2)}),0)/this.period)},t.prototype.momentValue=function(t,i){var e=this.values.push(t),s=Math.sqrt(this.values.toArray().reduce((function(t,e){return t+Math.pow(e-i,2)}),0)/this.period);return this.values.pushback(e),s},t}(),z=function(){function t(t,i){void 0===t&&(t=20),void 0===i&&(i=2),this.period=t,this.stdDev=i,this.fill=0,this.sma=new c(t),this.sd=new j(t)}return t.prototype.nextValue=function(t){var i=this,e=this.sma.nextValue(t),s=this.sd.nextValue(t,e);if(this.fill++,this.fill===this.period){var n=e-this.stdDev*s,o=e+this.stdDev*s;return this.nextValue=function(t){var e=i.sma.nextValue(t),s=i.sd.nextValue(t,e);return{lower:e-i.stdDev*s,middle:e,upper:e+i.stdDev*s}},{lower:n,middle:e,upper:o}}},t.prototype.momentValue=function(t){var i=this.sma.momentValue(t),e=this.sd.momentValue(t,i);return{lower:i-this.stdDev*e,middle:i,upper:i+this.stdDev*e}},t}(),$=function(){function t(t,i,e){void 0===t&&(t=12),void 0===i&&(i=26),void 0===e&&(e=9),this.periodEmaFast=t,this.periodEmaSlow=i,this.periodSignal=e,this.emaFastIndicator=new d(t),this.emaSlowIndicator=new d(i),this.emaSignalIndicator=new d(e)}return t.prototype.nextValue=function(t){var i=this.emaFastIndicator.nextValue(t),e=this.emaSlowIndicator.nextValue(t),s=i-e,n=s&&this.emaSignalIndicator.nextValue(s)||void 0,o=s-n||void 0;if(!isNaN(s))return{macd:s,emaFast:i,emaSlow:e,signal:n,histogram:o}},t.prototype.momentValue=function(t){var i=this.emaFastIndicator.momentValue(t),e=this.emaSlowIndicator.momentValue(t),s=i-e,n=s&&this.emaSignalIndicator.momentValue(s);return{macd:s,emaFast:i,emaSlow:e,signal:n,histogram:s-n}},t}(),Y=function(){function t(){this.prevOpen=0,this.prevClose=0}return t.prototype.nextValue=function(t,i,e,s){var n=this.calculate(t,i,e,s);return this.prevClose=n.c,this.prevOpen=n.o,n},t.prototype.momentValue=function(t,i,e,s){return this.calculate(t,i,e,s)},t.prototype.calculate=function(t,i,e,s){return s=(t+i+e+s)/4,this.prevOpen&&(t=(this.prevOpen+this.prevClose)/2),{o:t,h:i=Math.max(i,t,s),l:e=Math.min(e,t,s),c:s}},t}(),q=function(){function t(t){switch(void 0===t&&(t="classic"),this.mode=t,this.mode){case"classic":this.calculator=this.classic;break;case"camarilla":this.calculator=this.camarilla;break;case"woodie":this.calculator=this.woodie;break;case"fibonacci":this.calculator=this.fibonacci}}return t.prototype.nextValue=function(t,i,e){return this.calculator(t,i,e)},t.prototype.classic=function(t,i,e){var s=(t+i+e)/3;return{r3:t+2*(s-i),r2:s+(t-i),r1:2*s-i,pp:s,s1:2*s-t,s2:s-(t-i),s3:i-2*(t-s)}},t.prototype.woodie=function(t,i,e){var s=(t+i+2*e)/4;return{r2:s+t-i,r1:2*s-i,pp:s,s1:2*s-t,s2:s-t+i}},t.prototype.camarilla=function(t,i,e){var s=1.1*(t-i),n=t/i*e,o=e+s/2,r=n+1.168*(n-o);return{r6:r,r5:n,r4:o,r3:e+s/4,r2:e+s/6,r1:e+s/12,pp:(t+i+e)/3,s1:e-s/12,s2:e-s/6,s3:e-s/4,s4:e-s/2,s5:e-(n-e),s6:e-(r-e)}},t.prototype.fibonacci=function(t,i,e){var s=t-i,n=(t+i+e)/3;return{r3:n+s,r2:n+.618*s,r1:n+.382*s,pp:n,s1:n-.382*s,s2:n-.618*s,s3:n-s}},t}(),X=function(){function t(t,i,e){void 0===t&&(t=.02),void 0===i&&(i=.02),void 0===e&&(e=.2),this.start=t,this.acceleration=i,this.max=e,this.result=0,this.isBullTrend=!0}return t.prototype.nextValue=function(t,i,e){if(!this.result)return this.result=e,this.low1=i,this.high1=t,this.low2=i,this.high2=t,this.highest=t,this.lowest=i,this.accelerationFactor=this.start,i;if(this.isBullTrend?this.psar=this.result+this.accelerationFactor*(this.highest-this.result):this.psar=this.result+this.accelerationFactor*(this.lowest-this.result),this.isBullTrend)if(i<this.psar)this.isBullTrend=!1,this.psar=this.highest,this.lowest=i,this.accelerationFactor=this.start;else{if(t>this.highest){this.highest=t;var s=this.accelerationFactor+this.acceleration;this.accelerationFactor=s>this.max?this.max:s}this.low1<this.psar&&(this.psar=this.low1),this.low2<this.psar&&(this.psar=this.low2)}else t>this.psar?(this.isBullTrend=!0,this.psar=this.lowest,this.highest=t,this.accelerationFactor=this.start):(i<this.lowest&&(this.lowest=i,s=this.accelerationFactor+this.acceleration,this.accelerationFactor=s>this.max?this.max:s),this.high1>this.psar&&(this.psar=this.high1),this.high2>this.psar&&(this.psar=this.high2));return this.low2=this.low1,this.low1=i,this.high2=this.high1,this.high1=t,this.result=this.psar,this.result},t.prototype.momentValue=function(t,i){if(!this.result)return i;var e,s=this.isBullTrend,n=this.result,o=this.low1,r=this.high1,h=this.low2,l=this.high2,a=this.highest,u=this.lowest,c=this.accelerationFactor;return e=s?n+c*(a-n):n+c*(u-n),s?i<e?e=a:(o<e&&(e=o),h<e&&(e=h)):t>e?e=u:(r>e&&(e=r),l>e&&(e=l)),e},t}(),G=function(){function t(t){this.period=t,this.prevValue=0,this.sumCount=1}return t.prototype.nextValue=function(t){var i=this;return this.sumCount<this.period?(this.prevValue+=t,void this.sumCount++):this.sumCount===this.period?(this.prevValue+=t,this.sumCount++,this.nextValue=function(t){return i.prevValue=i.prevValue-i.prevValue/i.period+t},this.prevValue):void 0},t.prototype.momentValue=function(t){if(!(this.sumCount<this.period))return this.prevValue-this.prevValue/this.period+t},t}(),K=function(){function t(t){void 0===t&&(t=14),this.period=t,this.wma1=new G(t),this.wma2=new G(t),this.wma3=new G(t),this.wema=new p(t)}return t.prototype.nextValue=function(t,i,e){if(!this.prevClose)return this.prevHigh=t,this.prevLow=i,void(this.prevClose=e);var s=0,n=0,o=t-this.prevHigh,r=this.prevLow-i;o>r&&o>0&&(s=o),r>o&&r>0&&(n=r),(s>n||n<0)&&(n=0);var h=this.wma1.nextValue(O(t,i,this.prevClose)),l=this.wma2.nextValue(s),a=this.wma3.nextValue(n);if(this.prevHigh=t,this.prevLow=i,this.prevClose=e,void 0!==l&&void 0!==a){var u=100*l/h,c=100*a/h,p=u>c?u-c:c-u;return{adx:this.wema.nextValue(p/(u+c)*100),pdi:u,mdi:c}}},t.prototype.momentValue=function(t,i,e){if(this.prevClose){var s=0,n=0,o=t-this.prevHigh,r=this.prevLow-i;o>r&&o>0&&(s=o),r>o&&r>0&&(n=r),(s>n||n<0)&&(n=0);var h=this.wma1.momentValue(O(t,i,this.prevClose)),l=this.wma2.momentValue(s),a=this.wma3.momentValue(n);if(void 0!==l&&void 0!==a){var u=100*l/h,c=100*a/h,p=u>c?u-c:c-u;return{adx:this.wema.momentValue(p/(u+c)*100),pdi:u,mdi:c}}}},t}(),J=function(){function t(t,i,e){void 0===t&&(t=10),void 0===i&&(i=3),void 0===e&&(e="WEMA"),this.multiplier=i,this.atr=new R(t,e)}return t.prototype.nextValue=function(t,i,e){var s=this.atr.nextValue(t,i,e);if(s){var n=(t+i)/2,o=n+this.multiplier*s,r=n-this.multiplier*s;this.prevLower&&(r=r>this.prevLower||this.prevClose<this.prevLower?r:this.prevLower,o=o<this.prevUpper||this.prevClose>this.prevUpper?o:this.prevUpper);var h,l=(h=this.prevSuper===this.prevUpper?e>o?r:o:e<r?o:r)===o?1:-1;return this.prevUpper=o,this.prevLower=r,this.prevSuper=h,this.prevClose=e,{upper:o,lower:r,superTrend:h,direction:l}}},t.prototype.momentValue=function(t,i,e){var s=this.atr.momentValue(t,i),n=(t+i)/2,o=n+this.multiplier*s,r=n-this.multiplier*s;this.prevLower&&(r=r>this.prevLower||this.prevClose<this.prevLower?r:this.prevLower,o=o<this.prevSuper||this.prevClose>this.prevUpper?o:this.prevUpper);var h;return{upper:o,lower:r,superTrend:h=this.prevSuper===this.prevUpper?e>o?r:o:e<r?o:r,direction:h===o?1:-1}},t}(),Q=function(t){return(t.o+t.h+t.l+t.c)/4},Z=function(){function t(t,i){void 0===t&&(t=4),void 0===i&&(i=Q),this.sum=0,this.sessionPricesLookup=new Set,this.sessionVolumes={},this.prevCandle=null,this.source=i,this.precision=t,this.valueToRoundWith=Math.pow(10,this.precision)}return t.prototype.getSession=function(t,i){var e=this;void 0===i&&(i=15);var s=this.source(t),n=1/0,o=s;this.sessionPricesLookup.forEach((function(t){var r=e.diffPercent(t,s);r>i?(e.sessionPricesLookup.delete(t),delete e.sessionVolumes[t]):r<n&&(n=r,o=t)}));var r=Array.from(this.sessionPricesLookup).sort(),h=r.indexOf(o),l=new Map;if(-1===h)return l;for(var a=Math.round(r.length/4),u=0,c=0;c<4;c++){for(var p=c*a,d=p+a,f=0,m=0,v=p;v<d;v++){var g=r[p],w=this.sessionVolumes[g];f<w&&(f=w,m=g)}this.diffPercent(u,m)<1&&(f=l.get(u)+f,m=this.roundPrice((m+u)/2),l.delete(u)),l.set(m,f),u=m}return l},t.prototype.getSessionAvg=function(){return this.sum/this.sessionPricesLookup.size},t.prototype.getRawSession=function(){return this.sessionVolumes},t.prototype.nextValue=function(t){var i,e=this.roundPrice(this.source(t)),s=(null===(i=this.prevCandle)||void 0===i?void 0:i.time)===t.time?t.v-this.prevCandle.v:t.v;this.addToSession(e,s),this.sum+=s,this.lastPrice=e,this.prevCandle=t},t.prototype.roundPrice=function(t){return Math.round((t+Number.EPSILON)*this.valueToRoundWith)/this.valueToRoundWith},t.prototype.addToSession=function(t,i){this.sessionPricesLookup.has(t)?this.sessionVolumes[t]+=i:(this.sessionPricesLookup.add(t),this.sessionVolumes[t]=i)},t.prototype.diffPercent=function(t,i){return t<i?100*(i-t)/t:100*(t-i)/i},t}(),tt=function(){function t(t,i){void 0===t&&(t=3),void 0===i&&(i=10),this.accDistribution=0,this.emaFast=new d(t),this.emaSlow=new d(i)}return t.prototype.nextValue=function(t,i,e,s){return this.accDistribution+=e===t&&e===i||t===i?0:(2*e-i-t)/(t-i)*s,this.emaFast.nextValue(this.accDistribution)-this.emaSlow.nextValue(this.accDistribution)},t.prototype.momentValue=function(t,i,e,s){var n=this.accDistribution+(e===t&&e===i||t===i?0:(2*e-i-t)/(t-i)*s);return this.emaFast.momentValue(n)-this.emaSlow.momentValue(n)},t}();t.AC=P,t.ADX=K,t.AO=M,t.ATR=R,t.BollingerBands=z,t.CCI=T,t.ChaikinOscillator=tt,t.CircularBuffer=a,t.Correlation=g,t.DC=N,t.EMA=d,t.EWMA=x,t.Extremums=u,t.HeikenAshi=Y,t.LWMA=E,t.Level=v,t.MACD=$,t.Move=b,t.PSAR=X,t.Pivot=q,t.RMA=y,t.ROC=U,t.RSI=B,t.SMA=c,t.SMMA=V,t.Sampler=f,t.StandardDeviation=j,t.Stochastic=C,t.StochasticRSI=_,t.SuperTrend=J,t.TrendLines=l,t.UniLevel=m,t.VolumeProfile=Z,t.WEMA=p,t.WMA=w,t.WWS=G,t.Wave=S,t.cRSI=H,Object.defineProperty(t,"__esModule",{value:!0})}(i)}},i={};function e(s){var n=i[s];if(void 0!==n)return n.exports;var o=i[s]={exports:{}};return t[s].call(o.exports,o,o.exports,e),o.exports}e.d=(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};(()=>{"use strict";e.r(s),e.d(s,{default:()=>c});var t=e(978);const i=(i,e)=>{const s=[],n=new t.EMA(e);return i.forEach((t=>{s.push(n.nextValue(t))})),s},n=(i,e)=>{const s=[],n=new t.SMA(e);return i.forEach((t=>{s.push(n.nextValue(t))})),s},o=(t,i)=>{var e;return(0===(e=t.map(((t,e)=>t>i[e]?"up":t<i[e]?"down":"neutral")).reverse()).length?[]:e.reduce(((t,i,e,s)=>{if(0===e)t.push([i]);else{const n=s[e-1],o=t[t.length-1];i!==n?t.push([i]):o.push(i)}return t}),[])).map((t=>{const i=t.length;return t.map(((t,e)=>{let s=i-e;return"down"===t?-s:"up"===t?s:0}))})).flat().reverse()},r=(t,i)=>{let{upper:e,lower:s}=i;const n=e.map(((t,i)=>t-s[i]));return t.map(((t,i)=>(t-s[i])/n[i]*100))},h={getSMA:n,getEMA:i},l=(t,i=10)=>{const{open:e,high:s,low:n,close:o,volume:r}=t,h=Math.min(...n),l=(Math.max(...s)-h)/i,u={upVolume:0,downVolume:0,grossVolume:0},c=Array.from({length:i},((t,i)=>({price:h+l*i,upVolume:0,downVolume:0,grossVolume:0}))),p=1/l;for(let t=0;t<o.length;t++){const l=o[t],a=e[t],u=s[t],d=n[t],f=r[t],m=l>=a?f:0,v=l<a?f:0,g=Math.max(0,Math.floor((d-h)*p)),w=Math.min(i,Math.ceil((u-h)*p));for(let t=g;t<w;t++)c[t].upVolume+=m,c[t].downVolume+=v,c[t].grossVolume+=m+v}for(const{upVolume:t,downVolume:i,grossVolume:e}of c)u.upVolume+=t,u.downVolume+=i,u.grossVolume+=e;return{bins:c,nodes:a(c)}},a=t=>{if(!t||0===t.length)throw new Error("Bins array is empty or not provided");let i=t[0],e=t[0];return t.forEach((t=>{t.grossVolume>i.grossVolume&&(i=t),t.grossVolume<e.grossVolume&&(e=t)})),{highestVolumeNode:i,lowestVolumeNode:e}};class u{constructor(t,i=100){const e=["open","high","low","close"];for(let[s,n]of Object.entries(t))e.includes(s)&&(this[s]=n.splice(-i))}init(){if(this.close.length<50)return console.log("PatternRecognizer requires at least 50 datapoints"),{chart_parttern:"Neutral",chart_score:0};const t=[{name:"Bullish Flag",condition:this.isBullishFlag.bind(this),score:2},{name:"Bearish Flag",condition:this.isBearishFlag.bind(this),score:-2},{name:"Bullish Pennant",condition:this.isBullishPennant.bind(this),score:2},{name:"Bearish Pennant",condition:this.isBearishPennant.bind(this),score:-2},{name:"Bearish Double Top",condition:this.isDoubleTop.bind(this),score:-1},{name:"Bullish Double Bottom",condition:this.isDoubleBottom.bind(this),score:1},{name:"Bearish Triple Top",condition:this.isTripleTop.bind(this),score:-1},{name:"Bullish Triple Bottom",condition:this.isTripleBottom.bind(this),score:1},{name:"Bearish Head And Shoulders",condition:this.isHeadAndShoulders.bind(this),score:-1},{name:"Bullish Inverse Head And Shoulders",condition:this.isInverseHeadAndShoulders.bind(this),score:1},{name:"Bearish Rising Wedge",condition:this.isRisingWedge.bind(this),score:-1},{name:"Bullish Falling Wedge",condition:this.isFallingWedge.bind(this),score:1},{name:"Bullish Triangle",condition:this.isBullishTriangle.bind(this),score:1},{name:"Bearish Triangle",condition:this.isBearishTriangle.bind(this),score:-1},{name:"Bullish Rectangle",condition:this.isBullishRectangle.bind(this),score:1},{name:"Bearish Rectangle",condition:this.isBearishRectangle.bind(this),score:-1}];for(const{name:i,condition:e,score:s}of t)if(e())return{chart_parttern:i,chart_score:s};return{chart_parttern:"Neutral",chart_score:0}}isBullishFlag(){const t=this.close.length,i=Math.floor(t/3),e=(Math.floor(i/2),this.close[t-2*i]);if((this.close[t-i]-e)/e<.15)return!1;const s=this.close[t-i];if((s-this.close[t-1])/s>.05)return!1;for(let e=t-i;e<t-1;e++)if(this.high[e]>this.high[e+1]||this.low[e]>this.low[e+1])return!1;return!0}isBearishFlag(){const t=this.close.length,i=Math.floor(t/3),e=(Math.floor(i/2),this.close[t-2*i]);if((e-this.close[t-i])/e<.15)return!1;const s=this.close[t-i];if((this.close[t-1]-s)/s>.05)return!1;for(let e=t-i;e<t-1;e++)if(this.high[e]<this.high[e+1]||this.low[e]<this.low[e+1])return!1;return!0}isBullishPennant(){const t=this.close.length,i=Math.floor(t/3),e=Math.floor(i/2),s=this.close[t-2*i];if((this.close[t-i]-s)/s<.15)return!1;const n=this.close[t-i];if((n-this.close[t-1])/n>.05)return!1;for(let i=t-e;i<t-1;i++)if(this.high[i]<this.high[i+1]&&this.low[i]<this.low[i+1]||this.high[i]>this.high[i+1]&&this.low[i]>this.low[i+1])return!1;return!0}isBearishPennant(){const t=this.close.length,i=Math.floor(t/3),e=Math.floor(i/2),s=this.close[t-2*i];if((s-this.close[t-i])/s<.15)return!1;const n=this.close[t-i];if((this.close[t-1]-n)/n>.05)return!1;for(let i=t-e;i<t-1;i++)if(this.high[i]>this.high[i+1]&&this.low[i]>this.low[i+1]||this.high[i]<this.high[i+1]&&this.low[i]<this.low[i+1])return!1;return!0}isDoubleTop(){const t=this.close.length,i=Math.floor(t/2),e=Math.max(...this.close.slice(0,i)),s=Math.max(...this.close.slice(i));if(e<=0||s<=0)return!1;const n=Math.min(...this.close.slice(0,i)),o=Math.min(...this.close.slice(i));return!((e-n)/e<.1||(s-o)/s<.1)&&Math.abs(e-s)/e<.03}isDoubleBottom(){const t=this.close.length,i=Math.floor(t/2),e=Math.min(...this.close.slice(0,i)),s=Math.min(...this.close.slice(i));if(e<=0||s<=0)return!1;const n=Math.max(...this.close.slice(0,i)),o=Math.max(...this.close.slice(i));return!((n-e)/e<.1||(o-s)/s<.1)&&Math.abs(e-s)/e<.03}isTripleTop(){const t=this.close.length,i=Math.floor(t/3),e=Math.max(...this.close.slice(0,i)),s=Math.max(...this.close.slice(i,2*i)),n=Math.max(...this.close.slice(2*i));if(e<=0||s<=0||n<=0)return!1;const o=(e-Math.min(...this.close.slice(0,i)))/e,r=(s-Math.min(...this.close.slice(i,2*i)))/s,h=(n-Math.min(...this.close.slice(2*i)))/n;return!(o<.1||r<.1||h<.1)&&Math.abs(e-s)/e<.03&&Math.abs(e-n)/e<.03}isTripleBottom(){const t=this.close.length,i=Math.floor(t/3),e=Math.min(...this.close.slice(0,i)),s=Math.min(...this.close.slice(i,2*i)),n=Math.min(...this.close.slice(2*i));if(e<=0||s<=0||n<=0)return!1;const o=(Math.max(...this.close.slice(0,i))-e)/e,r=(Math.max(...this.close.slice(i,2*i))-s)/s,h=(Math.max(...this.close.slice(2*i))-n)/n;return!(o<.1||r<.1||h<.1)&&Math.abs(e-s)/e<.03&&Math.abs(e-n)/e<.03}isHeadAndShoulders(){const t=this.close.length,i=Math.floor(t/3),e=Math.max(...this.close.slice(0,i)),s=Math.max(...this.close.slice(i,2*i)),n=Math.max(...this.close.slice(2*i));if(e<=0||s<=0||n<=0)return!1;const o=Math.min(...this.close.slice(0,i)),r=Math.min(...this.close.slice(i,2*i)),h=Math.min(...this.close.slice(2*i)),l=(s-r)/s,a=(Math.max(o,h)-Math.min(o,h))/Math.min(o,h);return l>.15&&a<.03}isInverseHeadAndShoulders(){const t=this.close.length,i=Math.floor(t/3),e=Math.min(...this.close.slice(0,i)),s=Math.min(...this.close.slice(i,2*i)),n=Math.min(...this.close.slice(2*i));if(e<=0||s<=0||n<=0)return!1;const o=Math.max(...this.close.slice(0,i)),r=Math.max(...this.close.slice(i,2*i)),h=Math.max(...this.close.slice(2*i)),l=(r-s)/s,a=(Math.min(o,h)-Math.max(o,h))/Math.max(o,h);return l>.15&&a<.03}isRisingWedge(){const t=this.close.length,i=Math.floor(t/3),e=Math.max(...this.close.slice(0,i)),s=Math.max(...this.close.slice(i,2*i)),n=Math.max(...this.close.slice(2*i)),o=Math.min(...this.close.slice(0,i)),r=Math.min(...this.close.slice(i,2*i)),h=Math.min(...this.close.slice(2*i));return e<s&&s<n&&o<r&&r<h}isFallingWedge(){const t=this.close.length,i=Math.floor(t/3),e=Math.max(...this.close.slice(0,i)),s=Math.max(...this.close.slice(i,2*i)),n=Math.max(...this.close.slice(2*i)),o=Math.min(...this.close.slice(0,i)),r=Math.min(...this.close.slice(i,2*i)),h=Math.min(...this.close.slice(2*i));return e>s&&s>n&&o>r&&r>h}isBullishTriangle(){const t=this.close.length,i=Math.floor(t/2),e=Math.max(...this.high.slice(0,i)),s=Math.max(...this.high.slice(i)),n=Math.min(...this.low.slice(0,i)),o=Math.min(...this.low.slice(i));return e>s&&n<o}isBearishTriangle(){const t=this.close.length,i=Math.floor(t/2),e=Math.max(...this.high.slice(0,i)),s=Math.max(...this.high.slice(i));return Math.min(...this.low.slice(0,i))<Math.min(...this.low.slice(i))&&e>s}isBullishRectangle(){const t=this.close.length,i=Math.floor(t/3),e=Math.max(...this.high.slice(0,i)),s=Math.max(...this.high.slice(i,2*i)),n=Math.max(...this.high.slice(2*i)),o=Math.min(...this.low.slice(0,i)),r=Math.min(...this.low.slice(i,2*i)),h=Math.min(...this.low.slice(2*i)),l=Math.abs(e-s)/e<.03&&Math.abs(s-n)/s<.03,a=Math.abs(o-r)/o<.03&&Math.abs(r-h)/r<.03;return l&&a}isBearishRectangle(){const t=this.close.length,i=Math.floor(t/3),e=Math.max(...this.high.slice(0,i)),s=Math.max(...this.high.slice(i,2*i)),n=Math.max(...this.high.slice(2*i)),o=Math.min(...this.low.slice(0,i)),r=Math.min(...this.low.slice(i,2*i)),h=Math.min(...this.low.slice(2*i)),l=Math.abs(e-s)/e<.03&&Math.abs(s-n)/s<.03,a=Math.abs(o-r)/o<.03&&Math.abs(r-h)/r<.03;return l&&a}}class c{constructor(){this.VolumeProfile=l,this.ChartPatterns=t=>new u(t).init()}init(t){return this.ohlcv=t.reduce(((t,{open:i,high:e,low:s,close:n,volume:o,...r})=>{t.open.push(i),t.high.push(e),t.low.push(s),t.close.push(n),t.volume.push(o);for(const i of Object.keys(r))t[i]||(t[i]=[]),t[i].push(r[i]);return t}),{open:[],high:[],low:[],close:[],volume:[]}),this}getHeaders(){return Object.keys(this.ohlcv)}getData(){const{ohlcv:t}=this,i=Object.keys(t),e=i.length;return t.open.map(((s,n)=>{const o={};for(let s=0;s<e;s++){const e=i[s];o[e]=t[e][n]}return o}))}getLastValues(){const t={};for(const[i,e]of Object.entries(this.ohlcv)){let s=e[e.length-1];t[i]=s}return t}addColumn(t,i){const e=this.ohlcv.open.length;if(i.length>e)throw new Error("Invalid column data: The length of the new column exceeds the length of the OHLCV data");i=[...new Array(e-i.length).fill(null),...i],this.ohlcv[t]=i}crossPairs(t){const i=this.ohlcv,e={},s=t=>{if(!i.hasOwnProperty(t)&&"string"==typeof t){const[i,...e]=t.split("_");this[i]&&e.length>0&&this[i](...e)}};for(const{fast:n,slow:r}of t)if(n&&r)if(s(n),s(r),"number"!=typeof r||e[r]||(e[r]=i.close.map((()=>r))),i[n]&&i[r]){const t=o(i[n],i[r]);this.addColumn(`${n}_x_${r}`,t)}else if(i[n]&&e[r]){const t=o(i[n],e[r]);this.addColumn(`${n}_x_${r}`,t)}else console.error(`Missing ohlcv properties for ${n} or ${r}`)}ema(t){return((t,e)=>{const{ohlcv:s}=t,n=s.close,o=i(n,e);t.addColumn(`ema_${e}`,o)})(this,t),this}sma(t){return((t,i)=>{const{ohlcv:e}=t,s=e.close,o=n(s,i);t.addColumn(`sma_${i}`,o)})(this,t),this}macd(t,e,s){return((t,e=12,s=26,n=9)=>{const{ohlcv:r}=t,h=((t,e=12,s=26,n=9)=>{const r=i(t,e),h=i(t,s),l=r.map(((t,i)=>isNaN(t)||isNaN(h[i])?null:t-h[i])),a=i(l,n),u=l.map(((t,i)=>t-a[i])),c=o(l,a);return{macd_diff:l,macd_dea:a,macd_histogram:u,macd_diff_x_macd_dea:c}})(r.close,e,s,n);for(let i in h)t.addColumn(i,h[i])})(this,t,e,s),this}bollingerBands(i,e,s){return((i,e,s)=>{const{ohlcv:n}=i,o=((i,e=20,s=2)=>{const n={lower:[],middle:[],upper:[]},o=new t.BollingerBands(e,s);i.forEach((t=>{const i=o.nextValue(t);if("object"==typeof i){const{lower:t,middle:e,upper:s}=i;n.lower.push(t),n.middle.push(e),n.upper.push(s)}else n.lower.push(null),n.middle.push(null),n.upper.push(null)}));const h=r(i,{upper:n.upper,lower:n.lower});return{...n,range:h}})(n.close,e,s);for(let t in o)i.addColumn(`bollinger_bands_${t}`,o[t])})(this,i,e),this}rsi(i,e,s){return((i,e,s,n)=>{const{ohlcv:r}=i;"number"==typeof e&&void 0===n&&(n=e);const l=((i,e=14,s="SMA",n=14)=>{if(i.length<e)return[];let r=[];e=parseInt(e),n=parseInt(n);const l=new t.RSI(e);i.forEach((t=>{r.push(l.nextValue(t))})),r=r.filter((t=>t));let a={[`rsi_${e}`]:r};if("string"==typeof s&&"number"==typeof n&&h.hasOwnProperty(`get${s}`)){const t=h[`get${s}`](r,n);a[`rsi_${s}_${n}`]=t,a[`rsi_${e}_x_rsi_${s}_${n}`]=o(r,t)}return a})(r.close,e,s,n);for(let t in l)i.addColumn(`${t}`.toLowerCase(),l[t])})(this,i,e,s),this}candles(){return(t=>{const{ohlcv:i}=t,e=(t=>{const{open:i,high:e,low:s,close:n}=t,o=i.length;if(![i,e,s,n].every((t=>Array.isArray(t)&&t.length>1&&t.length===o)))return{pattern:Array(o).fill("Neutral"),name:Array(o).fill("No Pattern"),score:Array(o).fill(0)};const r=(t,i,e=1e-4)=>Math.abs(t-i)<e,h={bullish:[{name:"Marubozu",condition:(t,i)=>r(i.open,i.low)&&r(i.close,i.high),score:2},{name:"Engulfing",condition:(t,i)=>i.open<t.close&&i.close>t.open&&i.low<t.low&&i.high>t.high,score:2},{name:"Kicker",condition:(t,i)=>i.open<t.open&&i.close>i.open&&t.close<t.open,score:2},{name:"Morning Star",condition:(t,i)=>i.close>t.close&&i.open<t.open&&t.close<t.open,score:2},{name:"Piercing Line",condition:(t,i)=>i.close>t.close&&i.open<t.open&&i.close>(t.open+t.close)/2,score:1},{name:"Belt Hold",condition:(t,i)=>i.open>t.open&&r(i.close,i.high)&&r(t.close,t.low),score:1},{name:"Harami",condition:(t,i)=>i.open>t.close&&i.close<t.open&&i.open<t.open&&i.close>t.close,score:1},{name:"Doji",condition:(t,i)=>r(i.close,i.open)&&i.high-i.low>Math.abs(i.close-i.open),score:0}],bearish:[{name:"Marubozu",condition:(t,i)=>r(i.open,i.high)&&r(i.close,i.low),score:-2},{name:"Engulfing",condition:(t,i)=>i.open>t.close&&i.close<t.open&&i.high>t.high&&i.low<t.low,score:-2},{name:"Kicker",condition:(t,i)=>i.open>t.open&&i.close<i.open&&t.close>t.open,score:-2},{name:"Evening Star",condition:(t,i)=>i.close<t.close&&i.open>t.open&&t.close<t.open,score:-2},{name:"Dark Cloud Cover",condition:(t,i)=>i.close<t.close&&i.open>t.open&&i.close<(t.open+t.close)/2,score:-1},{name:"Belt Hold",condition:(t,i)=>i.open<t.open&&r(i.close,i.low)&&r(t.close,t.high),score:-1},{name:"Harami",condition:(t,i)=>i.open<t.close&&i.close>t.open&&i.open>t.open&&i.close<t.close,score:-1},{name:"Doji",condition:(t,i)=>r(i.close,i.open)&&i.high-i.low>Math.abs(i.close-i.open),score:0}]},l=(t,i,e)=>{for(const{name:s,condition:n,score:o}of e)if(n(t,i))return{name:s,score:o};return null},a=["Neutral"],u=["No Pattern"],c=[0];for(let t=1;t<o;t++){const o={open:i[t-1],high:e[t-1],low:s[t-1],close:n[t-1]},r={open:i[t],high:e[t],low:s[t],close:n[t]},p=l(o,r,h.bullish)||l(o,r,h.bearish);p?(a.push(p.score>0?"Bullish":"Bearish"),u.push(p.name),c.push(p.score)):(a.push("Neutral"),u.push("No Pattern"),c.push(0))}return{pattern:a,name:u,score:c}})(i);for(let i in e)t.addColumn(`candle_${i}`.toLowerCase(),e[i])})(this),this}}})(),OHLCV_INDICATORS=s})();